import{u as L,_ as M}from"./BreadCrumbs.621b689c.js";import{y as O,A as B,o as g,h as _,p as e,m as x,u as t,I as h,t as d,D as R,C,J as F,x as U,B as j,r as T,w as k,H as $,s as b,q as N,L as v,G as q,k as E,l as P,c as H}from"./entry.92606d73.js";import{_ as z}from"./nuxt-link.2340e45d.js";import{u as D}from"./AuthStore.254bcb86.js";import{u as V}from"./TostStore.5a642af5.js";import{u as G}from"./useError.7f6d451d.js";const J={class:"md:w-3/12 bg-fpBlueDark/10 dark:bg-gray-800 p-10 rounded-lg sm:mb-10"},K={class:""},X={class:"w-fit mx-auto relative"},Y=["src"],Z={key:1,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUS8TjFE3RRsUZV9JietSrxIY8xke14UuulctZGjudNedC9oVgaJhQK9AE2nM8IXSXvls&usqp=CAU",alt:"",class:"rounded-full shadow-xl outline outline-4 outline-offset-2 outline-gray-200 block mx-auto w-[100px] h-[100px]"},Q=["textContent"],W={class:"my-6"},ee={__name:"menu",setup(S){const i=D(),p=V(),{currentLocale:o,dir:u}=O(),r=B().public.baseURL,c=B().public.apiURL;async function y(){try{const l=localStorage.getItem("user");i.logout(l).then(m=>{m.status&&(p.add({type:"success",message:o.value=="ar"?"تم تسجيل الخروج بنجاح":"success logout user"}),F("/"))})}catch(l){console.log(l)}}const a=()=>{document.getElementById("image").click()},f=async l=>{const s=l.target.files[0];if(!s)return;let m=new FormData;m.append("photo",s),await L("updateImage",()=>$fetch(`${c}/auth/updateImage`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("user")}`},body:m}).then(n=>{if(n.status)i.setUser(n.user),document.getElementById("photo-user").src=n.user.photo,p.add({type:"success",message:o.value=="ar"?"تم تحديث صورتك بنجاح":"success update your image"});else{console.log(n);let w={};for(const[A,I]of Object.entries(n.message))w[A]=I[0],p.add({type:"error",message:I[0]});errors.record(w)}}))};return(l,s)=>{const m=U,n=z;return g(),_("div",J,[e("div",K,[e("div",X,[x(m,{name:"ic-outline-edit",class:"text-2xl absolute bottom-0 -right-2 cursor-pointer dark:text-fpOrange",onClick:s[0]||(s[0]=w=>a())}),e("input",{type:"file",hidden:"",id:"image",onChange:s[1]||(s[1]=w=>f(w)),accept:"image/*"},null,32),t(i).user.photo?(g(),_("img",{key:0,src:`${t(r)}/images/${t(i).user.photo}`,alt:"",id:"photo-user",class:"object-cover rounded-full shadow-xl outline outline-4 outline-offset-2 outline-gray-200 block mx-auto w-[100px] h-[100px]"},null,8,Y)):h("",!0),t(i).user.photo?h("",!0):(g(),_("img",Z))])]),e("h2",{class:"text-fpBlueDark dark:text-fpOrange text-3xl text-center font-bold my-6 whitespace-nowrap",textContent:d(t(i).user.name)},null,8,Q),x(n,{to:"/profile",class:"account-link bg-fpBlueDark/10 text-fpBlueDark dark:text-fpOrange flex items-center p-4 text-xl rounded-lg cursor-pointer hover:text-fpBlue whitespace-nowrap"},{default:R(()=>[x(m,{name:"ri:user-3-fill",class:"ml-4"}),C(d(l.$t("profile")),1)]),_:1}),e("a",null,[e("div",W,[e("button",{class:"flex items-center justify-between px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-fpOrange border border-transparent rounded-lg active:bg-main_color_hover_2 hover:bg-main_color_hover_2 focus:outline-none focus:shadow-outline-purple",onClick:s[2]||(s[2]=w=>y())},d(l.$t("logout")),1)])])])}}},te={class:"bg-fpBlueDark/10 dark:bg-gray-800 rounded-xl p-6"},se=["onSubmit"],oe=e("h1",{class:"text-center text-4xl dark:text-fpOrange mb-10"},"تعديل بيانات الحساب",-1),ae={class:"flex flex-wrap -m-2"},ne={class:"flex flex-wrap -m-2"},le={class:"p-2 sm:w-full md:w-1/2"},re={class:"relative"},de=e("label",{for:"name",class:"leading-7 text-sm text-gray-600"},"الأسم",-1),ie=["placeholder"],ce={key:0,class:"mt-2 text-sm text-red-500"},ue={class:"p-2 sm:w-full md:w-1/2"},pe={class:"relative"},me=e("label",{for:"phone",class:"leading-7 text-sm text-gray-600"},"الهاتف",-1),ge={key:0,class:"mt-2 text-sm text-red-500"},_e={class:"p-2 sm:w-full md:w-1/2"},he={class:"relative"},xe=e("label",{for:"email",class:"leading-7 text-sm text-gray-600"},"البريد الإلكتروني",-1),fe={key:0,class:"mt-2 text-sm text-red-500"},ye={class:"p-2 sm:w-full md:w-1/2 mt-4"},be={class:"relative"},we=e("label",{for:"oldPassword",class:"leading-7 text-sm text-gray-600"},"كلمة المرور القديمة",-1),ke={class:"relative"},$e=["type"],ve={key:0,class:"mt-2 text-sm text-red-500"},Be={class:"p-2 sm:w-full md:w-1/2 mt-4"},Ce={class:"relative"},Ue=e("label",{for:"password",class:"leading-7 text-sm text-gray-600"},"كلمة المرور الجديدة",-1),De=["type"],Se={key:0,class:"mt-2 text-sm text-red-500"},Ie={class:"p-2 sm:w-full md:w-1/2 mt-4"},je={class:"relative"},Le=e("label",{for:"cpassword",class:"leading-7 text-sm text-gray-600"},"تأكيد كلمة المرور",-1),Oe=["type"],Ve={key:0,class:"mt-2 text-sm text-red-500"},Ae={class:"p-2 w-full mt-10 flex justify-between"},Me={type:"submit",class:"transition bg-fpOrange bg-flBlue hover:bg-flBlue2 text-white border-0 py-2 sm:px-2 md:px-8 focus:outline-none rounded text-lg font-medium block"},Re={__name:"update",setup(S){const i=B().public.apiURL+"/auth",p=D(),o=j(G()),{currentLocale:u,dir:r}=O();let c=T(!1);const y=V();let a=j({name:p.user.name,phone:p.user.phone,email:p.user.email,old_password:"",password:"",password_confirmation:""});const f=async()=>{(a.old_password==""||a.password==""||a.password_confirmation=="")&&(delete a.old_password,delete a.password,delete a.password_confirmation);try{await L("update",()=>$fetch(`${i}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("user")}`},body:{locale:u.value,...a}}).then(l=>{if(l.status)p.setUser(l.user),y.add({type:"success",message:u.value=="ar"?`تم تعديل المستخدم ${l.user.name}`:`success update user ${l.user.name}`}),p.showForm="profile";else if(l.errCode==422){let s={};console.log(l.message);for(const[m,n]of Object.entries(l.message))s[m]=n[0];o.record(s)}}))}catch(l){console.log(l)}};return(l,s)=>{const m=U;return g(),_("div",te,[e("form",{onSubmit:q(f,["prevent"]),method:"post",action:"",onKeydown:s[8]||(s[8]=n=>t(o).clear(n.target.name))},[oe,e("div",ae,[e("div",ne,[e("div",le,[e("div",re,[de,k(e("input",{type:"text",id:"name",name:"name",placeholder:l.$t("fl_user"),class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("name")?"is-invalid":""]),required:"","onUpdate:modelValue":s[0]||(s[0]=n=>t(a).name=n)},null,10,ie),[[$,t(a).name]]),t(o).has("name")?(g(),_("p",ce,d(t(o).get("name")),1)):h("",!0)])]),e("div",ue,[e("div",pe,[me,k(e("input",{type:"text",id:"phone",name:"phone",placeholder:"01090770686",class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("phone")?"is-invalid":""]),"onUpdate:modelValue":s[1]||(s[1]=n=>t(a).phone=n),required:""},null,2),[[$,t(a).phone]]),t(o).has("phone")?(g(),_("p",ge,d(t(o).get("phone")),1)):h("",!0)])]),e("div",_e,[e("div",he,[xe,k(e("input",{type:"email",id:"email",name:"email",placeholder:"name@gmail.com",class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("email")?"is-invalid":""]),"onUpdate:modelValue":s[2]||(s[2]=n=>t(a).email=n),required:""},null,2),[[$,t(a).email]]),t(o).has("email")?(g(),_("p",fe,d(t(o).get("email")),1)):h("",!0)])]),e("div",ye,[e("div",be,[we,e("div",ke,[e("button",{class:b([t(o).has("password")?"is-invalid":"","bg-slate-200 absolute end-0 top-0 cursor-pointer w-10 h-full rounded-e-lg"]),type:"button",onClick:s[3]||(s[3]=n=>N(c)?c.value=!t(c):c=!t(c))},[x(m,{name:t(c)?"ph-eye-slash-fill":"ph-eye",class:"text-xl"},null,8,["name"])],2),k(e("input",{id:"oldPassword",name:"old_password",placeholder:"كلمة المرور القديمة",class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("password")?"is-invalid":""]),"onUpdate:modelValue":s[4]||(s[4]=n=>t(a).old_password=n),type:t(c)?"text":"password"},null,10,$e),[[v,t(a).old_password]])]),t(o).has("password")?(g(),_("p",ve,d(t(o).get("password")),1)):h("",!0)])]),e("div",Be,[e("div",Ce,[Ue,k(e("input",{type:t(c)?"text":"password",id:"password",name:"password",placeholder:"كلمة المرور",class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("password")?"is-invalid":""]),"onUpdate:modelValue":s[5]||(s[5]=n=>t(a).password=n)},null,10,De),[[v,t(a).password]]),t(o).has("password")?(g(),_("p",Se,d(t(o).get("password")),1)):h("",!0)])]),e("div",Ie,[e("div",je,[Le,k(e("input",{type:t(c)?"text":"password",id:"cpassword",name:"cPassword",placeholder:"تأكيد كلمة المرور",class:b(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",t(o).has("password")?"is-invalid":""]),"onUpdate:modelValue":s[6]||(s[6]=n=>t(a).password_confirmation=n)},null,10,Oe),[[v,t(a).password_confirmation]]),t(o).has("password")?(g(),_("p",Ve,d(t(o).get("password")),1)):h("",!0)])])]),e("div",Ae,[e("button",Me,[x(m,{name:"dashicons-update2",class:"md:ml-4 text-2xl"}),C(" تحديث الحساب ")]),e("button",{type:"button",onClick:s[7]||(s[7]=n=>t(p).showForm="profile"),class:"transition bg-fpOrange bg-flBlue hover:bg-flBlue2 text-white border-0 py-2 sm:px-2 md:px-8 focus:outline-none rounded text-lg font-medium block cursor-pointer"},[x(m,{name:"ri:user-3-fill",class:"md:ml-4"}),C(" الملف الشخصي ")])])])],40,se)])}}},Fe={class:"pb-40"},Te={class:"pt-10"},Ne={class:"container mx-auto lg:mt-24 md:flex gap-10 object-cover"},qe={key:1,class:"md:w-4/6"},Ee={class:"bg-fpBlueDark/10 dark:bg-gray-800 px-10 pt-10 pb-5 rounded-lg custom-underline"},Pe={class:"flex items-center dark:text-fpOrange"},He={class:"text-3xl font-bold -mb-2"},ze={class:"flex items-center justify-between mt-10"},Ge={class:"text-xl lg:text-2xl dark:text-fpLightBack"},Je=["textContent"],Ke=e("hr",{class:"-mr-10 mt-2 w-[109%]"},null,-1),Xe={class:"flex items-center justify-between mt-10"},Ye={class:"text-md lg:text-2xl dark:text-fpLightBack"},Ze=["textContent"],Qe=e("hr",{class:"-mr-10 mt-2 w-[109%]"},null,-1),We={class:"flex items-center justify-between mt-10"},et={class:"text-md lg:text-2xl dark:text-fpLightBack"},tt=e("p",{class:"text-lg text-gray-600 dark:text-gray-300"},"موافقة",-1),st=e("hr",{class:"-mr-10 mt-2 w-[109%]"},null,-1),ot={class:"flex items-center justify-between mt-10"},at={class:"text-md lg:text-2xl dark:text-fpLightBack"},nt=["textContent"],lt=e("hr",{class:"-mr-10 mt-2 w-[109%]"},null,-1),rt={class:"flex items-center justify-between mt-10"},dt={class:"text-md lg:text-2xl dark:text-fpLightBack"},it={class:"text-lg text-gray-600 dark:text-gray-300"},ct={class:"me-2 text-3xl"},xt={__name:"profile",setup(S){const i=D(),{t:p}=E();P({title:p("profile"),meta:[{name:"title",content:p("profile")}]});function o(u){var r=new Date(u);let c=r.getFullYear(),y=r.getMonth()<10?`0${r.getMonth()}`:r.getMonth(),a=r.getDay()<10?`0${r.getDay()}`:r.getDay(),f=r.getHours()<10?`0${r.getHours()}`:r.getHours(),l=r.getMinutes()<10?`0${r.getMinutes()}`:r.getMinutes(),s=r.getSeconds()<10?`0${r.getSeconds()}`:r.getSeconds();return`${a}-${y}-${c} ${s}:${l}:${f}`}return(u,r)=>{const c=M,y=ee,a=Re,f=U;return g(),_("section",Fe,[x(c,{classes:"bg-gray-200 dark:bg-gray-700 dark:text-fpLightBack",contents:[u.$t("profile"),"تعديل"]},null,8,["contents"]),e("section",Te,[e("div",Ne,[x(y),t(i).showForm=="update"?(g(),H(a,{key:0})):h("",!0),t(i).showForm=="profile"?(g(),_("div",qe,[e("div",Ee,[e("div",Pe,[x(f,{name:"ri:user-3-fill",class:"ml-4 text-4xl"}),e("h1",He,d(u.$t("profile")),1)]),e("div",ze,[e("span",Ge,d(u.$t("name_user"))+" :",1),e("p",{class:"text-md text-gray-600 dark:text-gray-300",textContent:d(t(i).user.name)},null,8,Je)]),Ke,e("div",Xe,[e("span",Ye,d(u.$t("email_user"))+" :",1),e("p",{class:"text-lg text-gray-600 dark:text-gray-300",textContent:d(t(i).user.email)},null,8,Ze)]),Qe,e("div",We,[e("span",et,d(u.$t("status"))+":",1),tt]),st,e("div",ot,[e("span",at,d(u.$t("phone_user"))+":",1),e("p",{class:"text-lg text-gray-600 dark:text-gray-300",textContent:d(t(i).user.phone)},null,8,nt)]),lt,e("div",rt,[e("span",dt,d(u.$t("join_date"))+":",1),e("p",it,d(o(t(i).user.created_at)),1)])]),e("button",{class:"mx-auto leading-none relative bg-main_color_2 bg-fpOrangeDark transition pt-1 pb-2 px-4 text-base font-normal text-white rounded-md whitespace-nowrap flex items-center mt-4",onClick:r[0]||(r[0]=l=>t(i).showForm="update")},[e("span",ct,d(u.$t("edit_user")),1),x(f,{name:"ic-outline-mode-edit-outline",class:"text-3xl -mb-2"})])])):h("",!0)])])])}}};export{xt as default};
