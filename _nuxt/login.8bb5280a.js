import{_ as $,u as B}from"./BreadCrumbs.621b689c.js";import{y as D,B as g,r as O,A as C,k as L,l as S,h as p,m as d,p as e,t as a,G as U,u as s,w as f,H as V,s as _,q as T,L as N,I as q,D as A,F as I,x as M,o as x,C as P,J as R}from"./entry.92606d73.js";import{_ as j}from"./nuxt-link.2340e45d.js";import{u as E}from"./useError.7f6d451d.js";import{_ as F}from"./login_small.4e47bdb3.js";import{u as H}from"./AuthStore.254bcb86.js";import{u as z}from"./TostStore.5a642af5.js";const G={class:"bg-fpBlueDark/10 pt-10 pb-40"},J={class:"sm:pb-10 sm:mx-3 mx-auto lg:w-[1200px] flex flex-col-reverse lg:flex-row justify-center lg:items-center gap-x-10 bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-xl p-0"},K={class:"lg:w-1/2 lg:ps-4 lg:ms-28 sm:px-4"},W={class:"sm:mt-4 font-bold text-center text-3xl lg:text-5xl text-fpBlueDark dark:text-fpOrange mb-10"},Q=["onSubmit"],X={class:"mb-6"},Y={for:"success",class:"block mb-2 text-sm lg:text-md font-medium text-gray-700 dark:text-gray-300"},Z={class:"mb-6"},ee={for:"success",class:"block mb-4 text-sm lg:text-md font-medium text-gray-700 dark:text-gray-300"},te={class:"relative"},se=["type"],oe={key:0,class:"mt-2 text-sm text-red-500"},ae={href:"http://wa.me/201090844348",target:"_blank",class:"text-red-500"},re={type:"submit",class:"text-fpBlueDark bg-fpOrange hover:bg-fpOrange/90 transition-colors focus:ring-4 focus:ring-fpOrange font-bold rounded-lg text-lg lg:text-2xl mt-6 px-4 lg:px-10 py-2 lg:py-3 mx-auto block dark:bg-fpOrange dark:hover:bg-fpOrange focus:outline-none dark:focus:ring-fpOrange"},le={class:"text-md lg:text-xl mt-5 lg:mt-10"},ne={class:"dark:text-gray-300"},ie=e("div",{class:"lg:w-1/2 max-h-full"},[e("img",{src:F,alt:"Login",class:"object-cover ms-auto"})],-1),be={__name:"login",setup(de){const{currentLocale:c,dir:ce}=D(),l=g(E());let r=O(!1);const b=C().public.apiURL+"/auth",{t:u}=L();S({title:u("login"),meta:[{name:"title",content:u("login")}]});const h=H(),m=z();let i=g({email:"",password:""});async function y(){await B("login",()=>$fetch(`${b}/login`,{method:"POST",body:{locale:c.value,...i}}).then(t=>{t.status?(h.setUser(t.user),m.add({type:"success",message:c.value=="ar"?`مرحبًا بعودتك ${t.user.name}`:`Welcome back ${t.user.name}`}),R("/")):(t.errCode==422&&l.record({password:t.message}),m.add({type:"error",message:t.message}))}))}return(t,o)=>{const k=$,w=M,v=j;return x(),p(I,null,[d(k,{classes:" dark:text-fpLightBack",contents:[t.$t("login")]},null,8,["contents"]),e("section",G,[e("div",J,[e("div",K,[e("h1",W,a(t.$t("welcome_back")),1),e("form",{onSubmit:U(y,["prevent"]),onKeydown:o[3]||(o[3]=n=>s(l).clear(n.target.name)),method:"post"},[e("div",X,[e("label",Y,a(t.$t("email_user")),1),f(e("input",{type:"email",class:"bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",placeholder:"name@example.com",required:"","onUpdate:modelValue":o[0]||(o[0]=n=>s(i).email=n)},null,512),[[V,s(i).email]])]),e("div",Z,[e("label",ee,a(t.$t("password_user")),1),e("div",te,[e("button",{class:_([s(l).has("password")?"is-invalid":"","bg-slate-200 absolute end-0 top-0 cursor-pointer w-10 h-full rounded-e-lg"]),type:"button",onClick:o[1]||(o[1]=n=>T(r)?r.value=!s(r):r=!s(r))},[d(w,{name:s(r)?"ph-eye-slash-fill":"ph-eye",class:"text-xl"},null,8,["name"])],2),f(e("input",{type:s(r)?"text":"password",class:_(["bg-gray-50 placeholder-gray-400 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:text-gray-300 outline outline-1 outline-gray-200 dark:outline-none dark:focus:border-gray-500 focus:border",s(l).has("password")?"is-invalid":""]),placeholder:"********","onUpdate:modelValue":o[2]||(o[2]=n=>s(i).password=n),required:""},null,10,se),[[N,s(i).password]])]),s(l).has("password")?(x(),p("p",oe,a(s(l).get("password")),1)):q("",!0)]),e("a",ae,a(t.$t("forgot_password")),1),e("button",re,a(t.$t("login")),1),e("div",le,[e("span",ne,a(t.$t("dont_account")),1),d(v,{to:t.localePath("/register"),class:"text-fpBlueDark dark:text-fpOrange font-bold ms-1"},{default:A(()=>[P(a(t.$t("new_account")),1)]),_:1},8,["to"])])],40,Q)]),ie])])],64)}}};export{be as default};
